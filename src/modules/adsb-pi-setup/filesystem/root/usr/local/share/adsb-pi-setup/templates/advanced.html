{% extends 'base.html' %}
{% set active_page = "advanced" %}

{% block content %}
<h1>{% block title %} Setup optional parameters {% endblock %}</h1>

<p>
<form method="post">
<button type="submit" class="bigbigbutton" name="tar1090" value="go">I'm done here - take me to the website</button>
</form>
<p>
<form method="post">
    <div class="row no-gutters">
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="privacy" id="privacy" {{ metadata['privacy'] }}/>
        <label for="privacy" class="mb-3 col-sm-11">Enable privacy flag (ON = does not show on <a href="https://map.adsb.lol/syncmap/">public aggregator maps</a>)</label><br/>
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="route" id="route" {{ metadata['route'] }}/>
        <label for="route" class="mb-3 col-sm-11">Use adsb.lol Route API to show flight routes when known.</label>
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="heywhatsthat" id="heywhatsthat" {{ metadata['heywhatsthat'] }}/>
        <div class="col-sm-11 no-gutters">
            <label for="heywhatsthat" class="mb-3 col-sm-11">
                <a href="https://www.heywhatsthat.com/">HeyWhat'sThat</a> is an incredibly cool web service that allows you
                to discover what you should be able to see from the location of your antenna - including estimates for how
                far away you should be able to detect planes (depending on their altitude - and assuming there are no other
                obstructions).
            </label>
            <div class="col-sm-11 mb-1" id="hwt-text"
                 style="display: {% if metadata['heywhatsthat'] == '1' and metadata['FEEDER_HEYWHATSTHAT_ID'] == '' %} block {% else %} none {% endif %}">
                Click on the link, select "New Panorama" at the top, enter your address (or find the location
                on the map), enter a title on the lower left and click "Submit request". After a couple of minutes you'll
                be offered to look at your panorama. At the top left you'll see the title you just entered, the latitude
                and longitude and elevation - and below that a link that starts ends with <code>/?view=CODE</code>.
                Enter this code here to see the theoretical range information on your receiver map.
            </div>
            <input type="text" id="HEYWHATSTHAT_ID" name="FEEDER_HEYWHATSTHAT_ID" class="form-control col-sm-6 ml-1 mb-2"
               placeholder=" HeyWhat'sThat Panorama ID" value="{{ env_values['FEEDER_HEYWHATSTHAT_ID'] }}">
        </div>
        <div class="row no-gutters" style="display: {%  if metadata['indagg'] == '1' %} block {% else %} none {% endif %} ">
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="adsblol" id="adsblol" {{ metadata['adsblol'] }}/>
            <label for="adsblol" class="mb-3 col-sm-10">Submit your data to <a href="https://adsb.lol/privacy-license/">adsb.lol</a></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="flyitaly" id="flyitaly" {{ metadata['flyitaly'] }}/>
            <label for="flyitaly" class="mb-3 col-sm-10">Submit your data to <a href="https://flyitalyadsb.com/informazioni-legali-e-privacy/">Fly Italy ADSB</a></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="avdelphi" id="avdelphi" {{ metadata['avdelphi'] }}/>
            <label for="avdelphi" class="mb-3 col-sm-10">Submit your data to <a href="https://www.avdelphi.com/privacy.html">AVDelphi</a></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="ps" id="ps" {{ metadata['ps'] }}/>
            <label for="ps" class="mb-3 col-sm-10">Submit your data to <a href="https://www.planespotters.net/legal/privacypolicy/">planespotters.net</a></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="adsbone" id="adsbone" {{ metadata['adsbone'] }}/>
            <label for="adsbone" class="mb-3 col-sm-10">Submit your data to <a href="https://adsb.one/privacy-license/">adsb.one</a> <small>(please note that this site is missing a clear data/privacy policy)</small></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="tat" id="tat" {{ metadata['tat'] }}/>
            <label for="tat" class="mb-3 col-sm-10">Submit your data to <a href="https://theairtraffic.com/privacy-license/">TheAirTraffic.com</a> <small>(please note that this site is missing a clear data/privacy policy)</small></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="adsbfi" id="adsbfi" {{ metadata['adsbfi'] }}/>
            <label for="adsbfi" class="mb-3 col-sm-10">Submit your data to <a href="https://adsb.fi/">adsb.fi</a> <small>(please note that this site is missing a clear data/privacy policy)</small></label><br/>
            <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="adsbx" id="adsbx" {{ metadata['adsbx'] }}/>
            <label for="adsbx" class="mb-3 col-sm-10">Submit your data to <a href="https://adsbexchange.com/legal-and-privacy/">ADSBExchange</a> <br/><small>(please note that this site has been aquired by a private equity company with unknown plans for the data submitted; it does, however, provide the best MLAT coverage of all the sites listed)</small></label><br/>
        </div>
    </div>
    <div class="form-group {{ 'visible' if metadata['adv_visible'] else 'invisible' }}">
        <button type="submit" name="submit" value="go" class="btn btn-primary">Submit</button>
    </div>
    <p>{{ message }} </p>
</form>
<script>
    function show_or_hide(b, f) {
        if (b.checked) f.style.display = "block"; else f.style.display = "none";
    }
    const hwt = document.getElementById('heywhatsthat');
    const hwttext = document.getElementById('hwt-text');
    hwt.addEventListener("change", function () {
        show_or_hide(hwt, hwttext);
    });
</script>
{% endblock %}
